import{initializeApp}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";import{getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,sendPasswordResetEmail}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";import{getFirestore,setDoc,doc}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";const firebaseConfig={apiKey:"AIzaSyAdjPwjqvtAGcU5uPkqUT1dxXM6W3A-rqU",authDomain:"businessmap-40e88.firebaseapp.com",projectId:"businessmap-40e88",storageBucket:"businessmap-40e88.appspot.com",messagingSenderId:"854634385555",appId:"1:854634385555:web:e6976172ce82c5ad5c3d66"},app=initializeApp(firebaseConfig);function showMessage(e,t){var s=document.getElementById(t);s.style.display="block",s.innerHTML=e,s.style.opacity=1,setTimeout((function(){s.style.opacity=0}),5e3)}const signUp=document.getElementById("submitSignUp");signUp.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("rEmail").value,s=document.getElementById("rPassword").value,o=document.getElementById("fName").value,n=document.getElementById("lName").value,a=getAuth(),i=getFirestore();createUserWithEmailAndPassword(a,t,s).then((e=>{const s=e.user,a={email:t,firstName:o,lastName:n};showMessage("Conta Criada com Sucesso","signUpMessage");const d=doc(i,"users",s.uid);setDoc(d,a).then((()=>{window.location.href="./index.html"})).catch((e=>{console.error("erro ao escrever documento",e)}))})).catch((e=>{showMessage("auth/email-already-in-use"==e.code?"Endereço de email Já Existe !!!":"Não é possível criar usuário","signUpMessage")}))}));const signIn=document.getElementById("submitSignIn");signIn.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("email").value,s=document.getElementById("password").value,o=getAuth();signInWithEmailAndPassword(o,t,s).then((e=>{showMessage("login foi bem sucedido","signInMessage");const t=e.user;localStorage.setItem("loggedInUserId",t.uid),window.location.href="../index.html"})).catch((e=>{showMessage("auth/invalid-credential"===e.code?"Senha ou email incorretos":"Conta não existe","signInMessage")}))}));const forgotPasswordLink=document.getElementById("forgotPasswordLink"),backToSignIn=document.getElementById("backToSignIn"),submitForgotPassword=document.getElementById("submitForgotPassword");forgotPasswordLink.addEventListener("click",(function(){document.getElementById("signIn").style.display="none",document.getElementById("forgotPassword").style.display="block"})),backToSignIn.addEventListener("click",(function(){document.getElementById("forgotPassword").style.display="none",document.getElementById("signIn").style.display="block"})),submitForgotPassword.addEventListener("click",(function(e){e.preventDefault();const t=document.getElementById("forgotEmail").value,s=getAuth();sendPasswordResetEmail(s,t).then((()=>{showMessage("Email de recuperação enviado","forgotPasswordMessage")})).catch((e=>{showMessage("Erro ao enviar email de recuperação","forgotPasswordMessage")}))}));